{% extends "base.html" %}

{% block title %}
  {{ lr_content.1.0.1.0.0.1 }} &ndash; META-SHARE
{% endblock %}

{% block links %}
<link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}css/resource_view.css" />
{% endblock %}

{% block description %}
  {{ lr_content.1.0.1.1.0.1|truncatewords:20}}...
{% endblock %}

{% block keywords %}
  {{ lr_content.1.1.1.0.0.1 }}, {{ lr_content.1.1.1.1.1.0.0.1 }}, {{ lr_content.1.8.1.0.1.0.0.1 }}, {{ lr_content.1.8.1.0.1.1.1.0.1.0.0.1 }}, {{ lr_content.1.8.1.0.1.1.1.0.1.1.1.0.0.1 }}
{% endblock %}


{% block content %}
		<script type="text/javascript" src="http://plugins.learningjquery.com/expander/jquery.expander.js"></script>
		<script type="text/javascript">
			$(function () {
				$('.readmore').expander({
					slicePoint: 300,
					expandText: 'Read More',
					userCollapseText: 'Read Less'
				});
			});
		</script>

		<script type="text/javascript">
			function getElementsByClassName(node,classname) 
			{
				if (node.getElementsByClassName)
					{return node.getElementsByClassName(classname);}
			}
			function getElementsByClass(searchClass,node,tag) 
			{
				var classElements = new Array();
				if ( node == null ){node = document;}
				if ( tag == null ){tag = '*';}
				var els = node.getElementsByTagName(tag);
				var elsLen = els.length;
				var pattern = new indexOf(searchClass);
				for (i = 0, j = 0; i < elsLen; i++) 
				{
				if ( pattern.test(els[i].className) ) 
					{
					classElements[j] = els[i];
					j++;
					}
				}
				return classElements;
			}
			function toggle(el) 
			{
				if (el.style.display == '') 
					{
					el.style.display = 'none';
					}
					else 
					{
					el.style.display = '';
					}
			}
			function displayMandatory()
			{
				var els = getElementsByClassName(document, 'mandatory');
				var i;
				for (i = 0; i < els.length; i += 1) 
				{
					toggle(els[i]);
				}
			}
			function displayOptional() 
			{
				var els = getElementsByClassName(document, 'optional');
				var i;
				for (i = 0; i < els.length; i += 1) 
				{
					toggle(els[i]);
				}
			}
		</script>
		
		<script>
			$(document).ready(function(){
				var selected_tab = $(".fields li.active").find("a").attr("href");				
				$(".tab_content").hide();
				$(selected_tab).fadeIn();						
				$(".fields li").click(function() {
					$(".fields li").removeClass("active");
					$(this).addClass("active");
					$(".tab_content").hide();
					var selected_tab = $(this).find("a").attr("href");
					$(selected_tab).fadeIn();										
					return false;
		  		});
		  		
			});			
		</script>	


		<style type="text/css">
			div#content dummy, span.details {
				font: inherit;
				color: inherit;
				vertical-align: inherit;
			 }
		</style>
		
		
	<div class="top_box white_box">
		<div id="stats" align="right">
            {% for stat in LR_STATS %}
                {%if "updated" in stat.action %}
                    &nbsp;<div align=right style="float: right"><i>(Last modified: {{ stat.last }})</i>&nbsp;</div>
                {% else %}
                	<a href="#" class="tip">
                    <img src="{{ MEDIA_URL }}stats/img/{{ stat.action }}_icon.gif"
                    alt="Last {{ stat.action }}: {{ stat.last }}"/>
                    <span>Last {{ stat.action }}: {{ stat.last }}</span>
                    </a>
                    <b>{{  stat.count }}</b>&nbsp;
                {% endif %}
            {% endfor %}
        </div>
        
		<h2>{{ resource }}</h2>	
		<h4>shortname if exists</h4>
		<h3 style="text-align:justify">description{{components_tuple.0.1.3.0.1|truncatewords:50}}...</h3>
		<h4><a href="{{url}}" target="_blank">url if exists</a></h4>
	
	
	
	</div>
	
	<div class='container_box'>
		<div class="white_box column corner readmore">
		
			<div class="dataline"><label class='title'>{{info|capfirst }}info label: </label><label>info</label></div>
		</div>
		
		<div class="column">
			<div class="fields">
					<ul>									
						<li class= "active"><a href="#first">Text</a></li>
						<li><a href="#second">Audio</a></li>
						<li><a href="#second">Video</a></li>
						<li><a href="#second">Image</a></li>
					</ul>		
				</div>
			<div class="white_box middle">
				
		
				<div id="tabs_content_container">
					<div id="first" class="tab_content">
						{{resource}}			
					</div>	
					<div id="second" class="tab_content">
						{{resource}}
					</div>			
				</div>			
			</div>
		</div>	
		<div class="white_box column corner">
		{% include "repository/detailed_component.html" %}
		</div>				
		
	</div>
		
	<div class='bottom_box'>
        
  <a href="javascript:history.back();"><button class="span-12 button middle_button">&laquo; Back</button></a>
  {% if LR_DOWNLOAD %}
    <a href="{% url metashare.repository.views.download resource.storage_object.identifier %}"><button class="span-4 button middle_button">Download</button></a>
  {% else %}
    <div class="popup_box">
      <div onmouseover="$(this).siblings('div.popup').show();" onmouseout="$(this).siblings('div.popup').hide();"><button class="span-4 button middle_gray_button">Download</button></div><div class="popup" style="height:50px; left:190px; width:270px; top:50px;"><img style="left:10px;" src="{{ MEDIA_URL }}images/adv_search_pfeil.png" />&nbsp;You don&rsquo;t have the permission to download this resource. Please log in.</div>
    </div>
  {% endif %}
  {% if LR_EDIT %}
    <a href="{{ LR_EDIT }}"><button class="span-4 button middle_button">Edit Resource</button></a>
  {% else %}
    <div onmouseover="$(this).siblings('div.popup').show();" onmouseout="$(this).siblings('div.popup').hide();"><button class="span-4 button middle_gray_button">Edit Resource</button></div><div class="popup" style="height:50px; left:350px; width:270px; top:60px;"><img style="left:10px;" src="{{ MEDIA_URL }}images/adv_search_pfeil.png" />&nbsp;You don&rsquo;t have the permission to edit this resource.</div>
  {% endif %}
  <div style="clear: both;"></div>
  
  <p><input type="checkbox" name="choose_view" onClick="displayOptional();"> Only show mandatory fields</p>

</div>

{% include "repository/recomm_view.html" %}

{% endblock %}
